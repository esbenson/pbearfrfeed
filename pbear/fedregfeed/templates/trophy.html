{% extends "base.html" %}

{% block script %}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.0/jquery.min.js"></script>
<script>
/* function to hide/show source data on click */
$(function() {
    $("#show_hide").click(function() {
        var display_val = $("#source_data").css("display");
        if (display_val == "none") {
            $("#source_data").css("display","inline");
            $("#show_hide").text("(-) hide source data");
        } else {
            $("#source_data").css("display","none");
            $("#show_hide").text("(+) show source data");
        }
    });
});
</script>
{% endblock script %}

{% block title %}Polar Bear Feed: Trophies{% endblock title %}

{% block listnav %}
            <a href="{% url pbear_list_default %}">list view</a>
{% endblock listnav %}

{% block content %}
    <div style="margin-left:auto; margin-right:auto; width:600px;text-align:center;">

    <!-- show map of state counts -->
    {% if map_url %}
        <h2>Applications for Polar Bear Trophy Import Permits by State of Applicant</h2>
        <img src="{{ map_url }}"/>

        <!-- show state/count details -->
        <div style="text-align:left"><span style="font-weight:bold">Number of Permit Applications per State</span>: {% for s in state_counts_sorted %}
                <span style="font-style:italic">{{s.0}}</span>: {{s.1}}{% if not forloop.last %},{% endif %}
            {% endfor %}. <span style="font-style:italic">TOTAL</span>: {{ state_counts_total }}. <span style="font-weight:bold">Note</span>: These figures were calculated from the list given below, which was automatically generated and may include errors and omissions.
        </div>
    {% endif %}


<!-- show pie chart of source populations -->
{% if popn_pie_chart_url %}
        <h2>Polar Bear Trophy Import Permit Applications by Source Population</h2>
        <img src="{{ popn_pie_chart_url }}"/>
{% endif %}

{% if freq_chart_url %}
        <h2>Polar Bear Trophy Import Permit Applications by Year and Source Population</h2>
        <img src="{{ freq_chart_url }}"/>
{% endif %}

</div>    




<!-- show trophy source data details -->
<div id="show_hide" style="font-style:italic;font-weight:bold;margin-top:30px;margin-bottom:20px;margin-left:auto; margin-right:auto; width:900px;text-align:center;align:center;">(+) show source data</div>
<div id="source_data" style="margin-left:auto; margin-right:auto; width:900px;text-align:center;font-size:10pt; align:center;display:none;" >
<h2>Polar Bear Trophy Permit Application Source Data</h2>
    <table style="margin-left:auto; margin-right:auto; width:900px; font-size:8pt; text-align:left">
    <tr><th></th><th width="100px">Date</th><th> </th><th>Name</th><th> </th><th>City</th><th>State</th><th>Permit #</th><th>Source Population</th></tr>
      {% for t in trophies_sorted %}
    <tr><td style="font-weight:bold">{{ forloop.counter }}</td>
        {% for v in t %}
        <td>{% if v %}{{ v}} {% endif %}</td>
    {% endfor %}</tr>
    {% endfor %}
</table>


<br/>
<p style="text-align:center"><span style="font-weight:bold">Note</span>: This list was automatically generated and may include errors and omissions. Source population names have been regularized.</p>

</div>


{% endblock content %}

